<div class="climastock-page">
  <div class="climastock-page-header">
    <div class="climastock-header-content">
      <div class="climastock-header-left">
        <div class="climastock-icon-wrapper">
          <i class="ph-stack"></i>
        </div>
        <div class="climastock-header-text">
          <h1 class="climastock-page-title">
            <%= t("activerecord.models.#{Municipio.model_name.i18n_key}.other") %>
          </h1>
          <p class="climastock-page-subtitle">Gerencie seus registros de forma eficiente e moderna</p>
        </div>
      </div>
      <div class="climastock-header-right">
        <%= link_to new_municipio_path, class: "climastock-btn climastock-btn-primary" do %>
          <i class="ph-plus-circle"></i>
          <span>Novo Registro</span>
        <% end %>
      </div>
    </div>
  </div>
  <div class="climastock-search-section">
    <%= search_form_for @q, html: { class: "climastock-search-form", autocomplete: "off" } do |f| %>
      <div class="climastock-search-wrapper">
        <i class="ph-magnifying-glass climastock-search-icon"></i>
        <%= f.search_field :nome_cont, 
        class: "climastock-search-input", 
        placeholder: "Buscar registros..." %>
        <%= f.button type: 'submit', class: 'climastock-search-btn' do %>
          <span>Buscar</span>
        <% end %>
        <% if params[:q] %>
          <%= link_to municipios_path, class: "climastock-clear-btn" do %>
            <i class="ph-x-circle"></i>
            <span>Limpar</span>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
  <div class="climastock-cards-grid">
    <% @municipios.each do |municipio| %>
      <div class="climastock-card">
        <div class="climastock-card-header">
          <div class="climastock-card-badge">
            <i class="ph-cube"></i>
          </div>
          <div class="climastock-card-actions">
            <div class="climastock-dropdown">
              <button class="climastock-dropdown-toggle" data-bs-toggle="dropdown">
                <i class="ph-dots-three-vertical"></i>
              </button>
              <div class="dropdown-menu dropdown-menu-end climastock-dropdown-menu">
                <%= link_to edit_municipio_path(municipio), class: "climastock-dropdown-item" do %>
                  <i class="ph-pen"></i>
                  <span>Editar</span>
                <% end %>
                <%= form_for municipio, method: :delete do |f| %>
                  <a class="climastock-dropdown-item climastock-dropdown-item-danger" 
                     data-confirm-delete="<%= municipio_path(municipio) %>" 
                    data-csrf-token="<%= form_authenticity_token %>">
                    <i class="ph-trash"></i>
                    <span>Excluir</span>
                  </a>
                <% end %>
              </div>
            </div>
          </div>
        </div>
        <div class="climastock-card-body">
          <div class="climastock-card-field">
            <span class="climastock-field-label">
              <%= t("activerecord.attributes.municipio.nome") %>
            </span>
            <span class="climastock-field-value">
              <%= municipio.nome %>
            </span>
          </div>
          <div class="climastock-card-field">
            <span class="climastock-field-label">
              <%= t("activerecord.attributes.municipio.estado") %>
            </span>
            <span class="climastock-field-value">
              <%= municipio.estado %>
            </span>
          </div>
        </div>
        <div class="climastock-card-footer">
          <%= link_to municipio_path(municipio), class: "climastock-card-link" do %>
            <span>Ver detalhes</span>
            <i class="ph-arrow-right"></i>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
  <div class="climastock-pagination">
    <%= pagy_bootstrap_nav(@pagy, link_extra: 'class="climastock-page-link"').html_safe %>
  </div>
</div>